import{n as r,R as i,b as l,i as c}from"./app-CbaWAQcg.js";import{l as o}from"./listMixin-DE8m5-oh.js";const u={name:"List",mixins:[o],data(){return{isFilter:!1,search:{name:"",district_id:null},pagination:{perPage:10,currentPage:1,total:0},editId:""}},computed:{fields(){const a=[{label:"Sl No",class:"text-center"},{label:"Salon Name",class:"text-center"},{label:"Salon Mobile",class:"text-center"},{label:"Address",class:"text-center"},{label:"Customer Name",class:"text-center"},{label:"Customer Mobile",class:"text-center"},{label:"Seat No",class:"text-center"},{label:"Barber",class:"text-center"},{label:"Barber Mobile",class:"text-center"},{label:"Service Time",class:"text-center"},{label:"Status",class:"text-center"},{label:"Action",class:"text-center"}];let e=[];return e=[{key:"index"},{key:"salon_name"},{key:"salon_mobile"},{key:"address"},{key:"customer_name"},{key:"customer_mobile"},{key:"seat_no"},{key:"barber"},{key:"barber_mobile"},{key:"service_time"},{key:"status"},{key:"action"}],a.map((s,t)=>Object.assign(s,e[t]))}},watch:{listReload:function(a){a&&this.loadData()}},methods:{toggleStatus(a,e){i.putData(l,`/service-requests/status/${a.id}/`,{...a,status:e}).then(s=>{this.$store.dispatch("mutedLoad",{listReload:!0}),c.success({title:"Success",message:s.message})})},loadData(){const a=Object.assign({},this.search,{page:this.pagination.currentPage,per_page:this.pagination.perPage,status:4});this.$store.dispatch("mutedLoad",{loading:!0}),i.getData(l,"service-requests",a).then(e=>{e.success&&(this.$store.dispatch("setList",e.data.data),this.paginationData(e.data)),this.$store.dispatch("mutedLoad",{loading:!1})})}}};var m=function(){var e=this,s=e._self._c;return s("div",[s("CRow",[s("CCol",[s("BreadCrumb"),s("CCard",[s("CCardHeader",[s("list-header",{attrs:{createUri:"/create"},on:{emitSearch:function(t){return e.searchData()},filterAction:e.filterEmitAction}})],1),s("CCardBody",{staticClass:"pt-0"},[s("div",{staticClass:"row mb-3"},[e.isFilter?s("div",{staticClass:"col-md-12"},[s("b-form",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-3"},[s("b-form-group",{attrs:{"label-cols-md":"12"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" Name ")]},proxy:!0}],null,!1,131818428)},[s("b-form-input",{attrs:{size:"sm",id:"email"},model:{value:e.search.email,callback:function(t){e.$set(e.search,"email",t)},expression:"search.email"}})],1)],1),s("div",{staticClass:"col-md-12 text-right"})])])],1):e._e()]),s("b-overlay",{attrs:{show:e.loading}},[s("div",{staticClass:"overflow-auto"},[s("b-table",{attrs:{"thead-class":"thead-color",emptyText:"Data Not Found",small:"","show-empty":"",bordered:"",hover:"",items:e.itemList,fields:e.fields},scopedSlots:e._u([{key:"cell(index)",fn:function(t){return[e._v(" "+e._s(t.index+1+e.pagination.slOffset)+" ")]}},{key:"cell(salon_name)",fn:function(t){return[e._v(" "+e._s(t.item.salon.salon_name)+" ")]}},{key:"cell(salon_mobile)",fn:function(t){return[e._v(" "+e._s(t.item.salon.phone_no)+" ")]}},{key:"cell(address)",fn:function(t){return[e._v(" "+e._s(t.item.salon.address)+" ")]}},{key:"cell(customer_name)",fn:function(t){return[e._v(" "+e._s(t.item.user.name)+" ")]}},{key:"cell(customer_mobile)",fn:function(t){return[e._v(" "+e._s(t.item.user.mobile_no)+" ")]}},{key:"cell(seat_no)",fn:function(t){return[e._v(" "+e._s(t.item.seat.seat_no)+" ")]}},{key:"cell(barber)",fn:function(t){return[e._v(" "+e._s(t.item.seat.service_person_name)+" ")]}},{key:"cell(barber_mobile)",fn:function(t){return[e._v(" "+e._s(t.item.seat.phone_no)+" ")]}},{key:"cell(status)",fn:function(t){return[t.item.status==2?s("span",{staticClass:"badge badge-success"},[e._v("Active")]):e._e(),t.item.status==1?s("span",{staticClass:"badge badge-warning"},[e._v("Pending")]):e._e(),t.item.status==4?s("span",{staticClass:"badge badge-danger"},[e._v("Reject")]):e._e()]}},{key:"cell(action)",fn:function(t){return[t.item.status==1||t.item.status==4?s("b-button",{staticClass:"ml-2 btn btn-success btn-sm",attrs:{title:"Approve"},on:{click:function(n){return e.changeStatus(t.item,2)}}},[s("i",{staticClass:"ri-check-line"})]):e._e(),t.item.status==2?s("b-button",{staticClass:"ml-2 btn btn-warning btn-sm",attrs:{title:"pending"},on:{click:function(n){return e.changeStatus(t.item,1)}}},[s("i",{staticClass:"ri-close-circle-line"})]):e._e(),t.item.status==1?s("b-button",{staticClass:"ml-2 btn btn-danger btn-sm",attrs:{title:"Reject"},on:{click:function(n){return e.changeStatus(t.item,4)}}},[s("i",{staticClass:"ri-close-circle-line"})]):e._e()]}}])},[e._v(" { key: 'salon_name' }, { key: 'salon_mobile' }, { key: 'address' }, { key: 'customer_name' }, { key: 'customer_mobile' }, { key: 'seat_no' }, { key: 'barber' }, { key: 'service_start' }, { key: 'service_end' }, ")])],1)]),s("b-pagination",{attrs:{size:"sm","total-rows":e.pagination.total,"per-page":e.pagination.perPage,align:"right"},on:{input:e.searchData},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}})],1)],1)],1)],1)],1)},d=[],b=r(u,m,d,!1,null,null);const p=b.exports;export{p as default};

import{R as o,b as r,i as c}from"./app-BlueZ7OP.js";const n={computed:{loading(){return this.$store.state.static.loading},id(){return this.$route.query.id}},watch:{},created(){this.editId&&(this.formData=this.getItem()),this.$route.query.id&&this.getItemById(this.$route.query.id).then(s=>{this.formData=s})},methods:{getItem(){const s=this.$store.state.list.find(a=>a.id===parseInt(this.editId));return JSON.parse(JSON.stringify(s))},dispatchLoad(s=!1){if(s){this.$store.dispatch("mutedLoad",{loading:!0,listReload:!1});return}this.$store.dispatch("mutedLoad",{loading:!1,listReload:!0}),this.$store.dispatch("dropdownLoad",{hasDropdownLoaded:!1})},async createUpdate(s="",a="",h="../"){try{let t=null;if(this.dispatchLoad(!0),this.editId||this.id){const e=this.editId?this.editId:this.id;t=await o.putData(r,`${a}/${e}`,this.formData)}else t=await o.postData(r,s,this.formData);this.dispatchLoad(!1),c.success({title:"Success",message:t.message}),t.success&&this.$router.push({path:h})}catch(t){this.$store.dispatch("mutedLoad",{loading:!1,listReload:!1}),t.status==422&&(this.errors=t.errors),c.error({title:"Success",message:"Something went wrong"})}},async createUpdateWithFile(s="",a="",h="../"){let t=null;this.dispatchLoad(!0);const e=new FormData;if(Object.keys(this.formData).forEach(d=>{const i=this.formData[d];i instanceof File||i instanceof Blob?e.append(d,i,i.name):i!=null&&e.append(d,i)}),this.editId||this.id){e.append("_method","PUT");const d=this.editId?this.editId:this.id;t=await o.postData(r,`${a}/${d}`,e)}else t=await o.postData(r,s,e);this.dispatchLoad(!1),c.success({title:"Success",message:t.message}),t.success&&this.$router.push({path:h})}}};export{n as f};

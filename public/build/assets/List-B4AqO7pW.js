import{n as c,R as n,b as r,i as o}from"./app-D5WddiTV.js";import{l}from"./listMixin-D4_bIHHF.js";const u={name:"List",mixins:[l],data(){return{isFilter:!1,baseUrl:r,search:{name:"",category_id:"",author_id:""},pagination:{perPage:10,currentPage:1,total:0},editId:"",errors:[]}},computed:{authorList(){return this.$store.state.commonObj.authorList},categoryList(){return this.$store.state.commonObj.categoryList},fields(){const s=[{label:"Sl No",class:"text-center"},{label:"Banner",class:"text-center"},{label:"Author",class:"text-center"},{label:"Category",class:"text-center"},{label:"Series Name",class:"text-center"},{label:"Status",class:"text-center"},{label:"Action",class:"text-center"}];let t=[];return t=[{key:"id"},{key:"banner_image"},{key:"author_name"},{key:"category_name"},{key:"name"},{key:"status"},{key:"action"}],s.map((e,a)=>Object.assign(e,t[a]))}},watch:{listReload:function(s){s&&this.loadData()}},methods:{toggleStatus(s,t){n.putData(r,`/series/status/${s.id}/`,{...s,status:t}).then(e=>{this.$store.dispatch("mutedLoad",{listReload:!0}),o.success({title:"Success",message:e.message})})},loadData(){const s=Object.assign({},this.search,{page:this.pagination.currentPage,per_page:this.pagination.perPage});this.$store.dispatch("mutedLoad",{loading:!0}),n.getData(r,"series",s).then(t=>{t.success&&(this.$store.dispatch("setList",t.data.data),this.paginationData(t.data)),this.$store.dispatch("mutedLoad",{loading:!1})})}}};var m=function(){var t=this,e=t._self._c;return e("div",[e("CRow",[e("CCol",[e("BreadCrumb"),e("CCard",[e("CCardHeader",[e("list-header",{attrs:{createUri:"/create"},on:{emitSearch:function(a){return t.searchData()},filterAction:t.filterEmitAction}})],1),e("CCardBody",{staticClass:"pt-0"},[e("div",{staticClass:"row mb-3"},[t.isFilter?e("div",{staticClass:"col-md-12"},[e("b-form",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3"},[e("Select",{attrs:{input:{name:"author_id",label:"Author",options:t.authorList,required:!0,errors:t.errors}},model:{value:t.search.author_id,callback:function(a){t.$set(t.search,"author_id",a)},expression:"search.author_id"}})],1),e("div",{staticClass:"col-md-3"},[e("Select",{attrs:{input:{name:"category_id",label:"Category",options:t.categoryList,required:!0,errors:t.errors}},model:{value:t.search.category_id,callback:function(a){t.$set(t.search,"category_id",a)},expression:"search.category_id"}})],1),e("div",{staticClass:"col-md-3"},[e("b-form-group",{attrs:{"label-cols-md":"12"},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" Name ")]},proxy:!0}],null,!1,131818428)},[e("b-form-input",{attrs:{size:"sm",id:"name"},model:{value:t.search.name,callback:function(a){t.$set(t.search,"name",a)},expression:"search.name"}})],1)],1)])])],1):t._e()]),e("b-overlay",{attrs:{show:t.loading}},[e("div",{staticClass:"overflow-auto"},[e("b-table",{attrs:{"thead-class":"thead-color",emptyText:"Data Not Found",small:"","show-empty":"",bordered:"",hover:"",items:t.itemList,fields:t.fields},scopedSlots:t._u([{key:"cell(id)",fn:function(a){return[t._v(" "+t._s(a.index+1+t.pagination.slOffset)+" ")]}},{key:"cell(author_name)",fn:function(a){var i;return[t._v(" "+t._s((i=a.item.author)==null?void 0:i.name)+" ")]}},{key:"cell(banner_image)",fn:function(a){return[a.item.banner_image?e("img",{staticClass:"img-thumbnail",attrs:{src:"/"+a.item.banner_image,alt:"Banner",width:"100"}}):t._e()]}},{key:"cell(category_name)",fn:function(a){var i;return[t._v(" "+t._s((i=a.item.category)==null?void 0:i.name)+" ")]}},{key:"cell(status)",fn:function(a){return[a.item.status==1?e("span",{staticClass:"badge badge-success"},[t._v("Active")]):e("span",{staticClass:"badge badge-warning"},[t._v("Inactive")])]}},{key:"cell(action)",fn:function(a){return[a.item.status==1?e("b-button",{staticClass:"ml-2 btn btn-danger btn-sm",attrs:{title:"Active/Inactive"},on:{click:function(i){return t.changeStatus(a.item,0)}}},[e("i",{staticClass:"ri-close-circle-line"})]):e("b-button",{staticClass:"ml-2 btn btn-success btn-sm",attrs:{title:"Active/Inactive"},on:{click:function(i){return t.changeStatus(a.item,1)}}},[e("i",{staticClass:"ri-check-line"})]),e("b-button",{staticClass:"ml-2 btn btn-primary btn-sm",attrs:{title:"Active/Inactive"},on:{click:function(i){return t.editRouter(a.item,"series/create")}}},[e("i",{staticClass:"ri-edit-line"})])]}}])})],1)]),e("b-pagination",{attrs:{size:"sm","total-rows":t.pagination.total,"per-page":t.pagination.perPage,align:"right"},on:{input:t.searchData},model:{value:t.pagination.currentPage,callback:function(a){t.$set(t.pagination,"currentPage",a)},expression:"pagination.currentPage"}})],1)],1)],1)],1)],1)},d=[],g=c(u,m,d,!1,null,null);const p=g.exports;export{p as default};
